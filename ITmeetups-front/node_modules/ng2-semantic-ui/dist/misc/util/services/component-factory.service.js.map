{"version":3,"file":"component-factory.service.js","sourceRoot":"","sources":["../../../../src/misc/util/services/component-factory.service.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,UAAU,EAAE,cAAc,EAAE,wBAAwB,EAAE,QAAQ,EAC9D,kBAAkB,EACrB,MAAM,eAAe,CAAC;;IAQnB,6BAAoB,eAA8B,EAC9B,yBAAkD,EAClD,SAAkB;QAFlB,oBAAe,GAAf,eAAe,CAAe;QAC9B,8BAAyB,GAAzB,yBAAyB,CAAyB;QAClD,cAAS,GAAT,SAAS,CAAS;KAAI;IAEnC,6CAAe,GAAtB,UAA0B,IAAY,EAAE,SAAyB;QAAzB,0BAAA,EAAA,cAAyB;;QAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,IAAe,CAAC,CAAC;;QAGxF,IAAM,QAAQ,GAAG,kBAAkB,CAAC,gBAAgB,CAChD,SAAS,EACT,IAAI,CAAC,SAAS,CACjB,CAAC;;QAGF,IAAM,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE9C,MAAM,CAAC,YAAY,CAAC;KACvB;IAEM,wCAAU,GAAjB,UAAoD,aAA8B,EAAE,QAAuB,EAAE,OAAS;QAClH,aAAa,CAAC,kBAAkB,CAAI,QAAQ,EAAE,OAAO,CAAC,CAAC;KAC1D;IAED,2DAA2D;;IACpD,0CAAY;;IAAnB,UAAuB,YAA4B,EAAE,aAA8B;QAC/E,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;KAClD;IAED,sDAAsD;;IAC/C,iDAAmB;;IAA1B,UAA8B,YAA4B;QACtD,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;KAC1D;IAED,yDAAyD;;IAClD,mDAAqB;;IAA5B,UAAgC,YAA4B;QACxD,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;KAC1D;IAED,oDAAoD;;IAC7C,2CAAa;;IAApB,UAAwB,YAA4B,EAAE,OAAe;QACjE,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;KAC5D;IAED,4CAA4C;;IACrC,gDAAkB;;IAAzB,UAA6B,YAA4B;QACrD,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAA,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAE,CAAA,CAAC,CAAC;KACrE;IAEM,gDAAkB,GAAzB,UAA6B,YAA4B;QACrD,IAAM,OAAO,GAAG,YAAY,CAAC,QAAQ,CAAC,aAAwB,CAAC;;QAE/D,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YACrB,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;SAC3C;KACJ;;gBAzDJ,UAAU;;;;gBARK,cAAc;gBAAE,wBAAwB;gBAAE,QAAQ;;8BADlE;;SAUa,mBAAmB","sourcesContent":["import {\r\n    Injectable, ApplicationRef, ComponentFactoryResolver, Injector, ComponentRef,\r\n    ReflectiveInjector, Provider, Type, ViewContainerRef, TemplateRef\r\n} from \"@angular/core\";\r\n\r\nexport interface IImplicitContext<T> {\r\n    $implicit?:T;\r\n}\r\n\r\n@Injectable()\r\nexport class SuiComponentFactory {\r\n    constructor(private _applicationRef:ApplicationRef,\r\n                private _componentFactoryResolver:ComponentFactoryResolver,\r\n                private _injector:Injector) {}\r\n\r\n    public createComponent<T>(type:Type<T>, providers:Provider[] = []):ComponentRef<T> {\r\n        // Resolve a factory for creating components of type `type`.\r\n        const factory = this._componentFactoryResolver.resolveComponentFactory(type as Type<T>);\r\n\r\n        // Resolve and create an injector with the specified providers.\r\n        const injector = ReflectiveInjector.resolveAndCreate(\r\n            providers,\r\n            this._injector\r\n        );\r\n\r\n        // Create a component using the previously resolved factory & injector.\r\n        const componentRef = factory.create(injector);\r\n\r\n        return componentRef;\r\n    }\r\n\r\n    public createView<T, U extends IImplicitContext<T>>(viewContainer:ViewContainerRef, template:TemplateRef<U>, context:U):void {\r\n        viewContainer.createEmbeddedView<U>(template, context);\r\n    }\r\n\r\n    // Inserts the component into the specified view container.\r\n    public attachToView<T>(componentRef:ComponentRef<T>, viewContainer:ViewContainerRef):void {\r\n        viewContainer.insert(componentRef.hostView, 0);\r\n    }\r\n\r\n    // Inserts the component in the root application node.\r\n    public attachToApplication<T>(componentRef:ComponentRef<T>):void {\r\n        this._applicationRef.attachView(componentRef.hostView);\r\n    }\r\n\r\n    // Detaches the component from the root application node.\r\n    public detachFromApplication<T>(componentRef:ComponentRef<T>):void {\r\n        this._applicationRef.detachView(componentRef.hostView);\r\n    }\r\n\r\n    // Moves the component to the specified DOM element.\r\n    public moveToElement<T>(componentRef:ComponentRef<T>, element:Element):void {\r\n        element.appendChild(componentRef.location.nativeElement);\r\n    }\r\n\r\n    // Moves the component to the document body.\r\n    public moveToDocumentBody<T>(componentRef:ComponentRef<T>):void {\r\n        this.moveToElement(componentRef, document.querySelector(\"body\")!);\r\n    }\r\n\r\n    public detachFromDocument<T>(componentRef:ComponentRef<T>):void {\r\n        const element = componentRef.location.nativeElement as Element;\r\n        // We can't use `element.remove()` due to lack of IE11 support.\r\n        if (element.parentNode) {\r\n            element.parentNode.removeChild(element);\r\n        }\r\n    }\r\n}\r\n"]}